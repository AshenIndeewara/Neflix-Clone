<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Netflix Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: url("https://assets.nflxext.com/ffe/siteui/vlv3/258d0f77-2241-4282-b613-8354a7675d1a/web/SG-en-20250721-TRIFECTA-perspective_48379786-6fbe-4a32-abac-2c931913155c_large.jpg") no-repeat center center/cover;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .auth-box {
      width: 100%;
      max-width: 380px;
      color: white;
    }
  </style>
</head>
<body>
  <div class="auth-box">
    <div id="sign-in"></div>
  </div>



  <script>
    function initClerk() {
      if (!window.Clerk) {
        console.error("❌ Clerk failed to load");
        return;
      }

      // Load Clerk
      Clerk.load().then(async () => {
        console.log("✅ Clerk loaded:", Clerk);

        // Check for active session
        const session = await Clerk.session;
        if (session) {
          // Already signed in → redirect
          //print role
          console.log("User role:", session.user);
          
          window.location.href = "index.html";
        } else {
          // Mount the SignIn widget
          Clerk.mountSignIn(document.getElementById("sign-in"), {
            afterSignInUrl: "index.html"
          });
        }
      });
    }
  </script>
    <!-- Clerk Script WITHOUT async -->
  <script
          crossorigin="anonymous"
          data-clerk-publishable-key="pk_test_dG9wLWdhbm5ldC05Mi5jbGVyay5hY2NvdW50cy5kZXYk"
          src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
          onload="initClerk()">
  </script>
</body>
</html>
